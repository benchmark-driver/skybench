:ruby
  require 'json'
  require 'yaml'

  yaml = File.expand_path('../../results/mjit.yml', __dir__)
  data = YAML.load_file(yaml)

  versions = data.fetch('ruby')
  results  = data.fetch('results')

.benchmark_page
  .text-center
    %h1 MJIT Benchmarks

  #graph_metadata{ 'data-versions': versions.to_json }
  - results.each do |name, values|
    .benchmark_graph{ id: name, 'data-values': values.to_json }

:javascript
  $(function () {
    var versions = $('#graph_metadata').data('versions');

    $('.benchmark_graph').each(function() {
      var id = $(this).attr('id');
      Highcharts.chart(id, {
        chart: {
          type: 'column'
        },
        title: {
          text: id
        },
        yAxis: {
          title: {
            text: 'Seconds'
          }
        },
        xAxis: {
          categories: versions
        },
        series: [{
          name: id,
          data: $(this).data('values')
        }]
      });
    });
  });
